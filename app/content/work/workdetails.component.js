System.register(['angular2/core', "angular2/router", "./work.service", "../../pipes/truncate"], function(exports_1, context_1) {
    "use strict";
    var __moduleName = context_1 && context_1.id;
    var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    };
    var __metadata = (this && this.__metadata) || function (k, v) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
    };
    var core_1, router_1, work_service_1, truncate_1;
    var WorkDetails;
    return {
        setters:[
            function (core_1_1) {
                core_1 = core_1_1;
            },
            function (router_1_1) {
                router_1 = router_1_1;
            },
            function (work_service_1_1) {
                work_service_1 = work_service_1_1;
            },
            function (truncate_1_1) {
                truncate_1 = truncate_1_1;
            }],
        execute: function() {
            WorkDetails = (function () {
                function WorkDetails(_router, _routeParams, _workService) {
                    this._router = _router;
                    this._routeParams = _routeParams;
                    this._workService = _workService;
                    this.urlId = null;
                    this.work = {};
                }
                WorkDetails.prototype.showDetails = function (workId) {
                    this._router.navigate(['WorkDetails', { id: workId }]);
                };
                WorkDetails.prototype.getWork = function () {
                    // Promise handling with ES5 - Example only
                    // 'this'-keyword will use inner environment
                    // this._workService.getWork().then(function(data){
                    //     for(var i = 0; i < data.length; i++) {
                    //         if(data[i].id == 1) {
                    //             this.work = data[i];
                    //         }
                    //     }
                    // });
                    var _this = this;
                    // Promise handling with ES6
                    // Get work details from passed urlId
                    this._workService.getWork().then(function (work) {
                        for (var _i = 0, work_1 = work; _i < work_1.length; _i++) {
                            var details = work_1[_i];
                            if (details.id == _this.urlId) {
                                _this.work = details;
                            }
                        }
                    });
                };
                ;
                /* Initialize get route parameters from passed urlId */
                WorkDetails.prototype.ngOnInit = function () {
                    this.urlId = this._routeParams.get('id');
                    this.getWork();
                };
                WorkDetails = __decorate([
                    core_1.Component({
                        selector: "workdetails",
                        template: "\n            <div class=\"container bottom-space\">\n            \n                <!--row-->\n                <div class=\"work-row row\">\n                    <div class=\"col-md-1\">\n                        <div class=\"rotate left-breadcrumb lb-small\">\n                                <h2>{{work.breadcrumb}}</h2>\n                        </div>\n                    </div>\n                    <!-- ./col-md-1 -->\n                    \n                    <div class=\"col-md-9 col-lg-8 col-md-offset-1 col-lg-offset-0 clr-space\">\n                        <!-- work-nav -->\n                        <div class=\"work-nav\">\n                            <div class=\"skew\">\n                                <div class=\"btn-group work-nav-btns\" role=\"group\">\n                                    <button class=\"btn btn-work\" (click)=\"showDetails(workId = urlId - 1)\" *ngIf=\"urlId > 1\"><span class=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"></span></button>\n                                    <button class=\"btn btn-work\" [routerLink]=\"['/Work']\"><span class=\"glyphicon glyphicon-th\" aria-hidden=\"true\"></span></button>\n                                    <button class=\"btn btn-work\" (click)=\"showDetails(workId = urlId + 1)\" *ngIf=\"urlId < 6\"><span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\"></span></button>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- /work-nav -->\n                    \n                        <!-- work-info -->\n                        <div class=\"content-box skew\">\n                            <div class=\"skew-justify\">\n                                <div class=\"work-details-info\">\n                                    <h1 [innerHTML]=\"work.title\"></h1>\n                                    <h3 [innerHTML]=\"work.subtitle\"></h3>\n                                    <div [innerHTML]=\"work.desc\"></div>\n    \n                                </div>\n                            </div>\n                        </div>\n                        <!-- /work-info -->\n                    </div>\n                    <!-- /.col [work-info-wrapper] -->\n                    \n                    <!-- work-content -->\n                     <div class=\"col-md-9 col-lg-10 col-md-offset-3 col-lg-offset-2 work-img clr-space\">\n                        <div class=\"content-box skew\"><div class=\"skew-justify\">\n                            <div class=\"img-details\" *ngFor=\"#img of work.img\">\n                                <h1 [innerHTML]=\"img.imgTitle\"></h1>\n                                <h3 [innerHTML]=\"img.imgDesc\"></h3>\n                                <img class=\"img-responsive\" src=\"{{img.imgUrl}}\" alt=\"\">\n                                \n                            </div>\n                        </div></div>\n                    </div>\n                    <!-- /.col [work-content] -->\n                </div>\n                <!--/row-->                                                              \n                \n            </div><!--/cont-->\n            \n            <!-- work-nav -->\n            <div class=\"container bottom-space\">\n                <div class=\"row work-nav\">\n                    <div class=\"skew\">\n                        <div class=\"btn-group work-nav-btns\" role=\"group\">\n                            <button class=\"btn btn-work\" (click)=\"showDetails(workId = urlId - 1)\" *ngIf=\"urlId > 1\"><span class=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"></span></button>\n                            <button class=\"btn btn-work\" [routerLink]=\"['/Work']\"><span class=\"glyphicon glyphicon-th\" aria-hidden=\"true\"></span></button>\n                            <button class=\"btn btn-work\" (click)=\"showDetails(workId = urlId + 1)\" *ngIf=\"urlId < 6\"><span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\"></span></button>\n                        </div>\n                    </div>\n                </div>  \n            </div>\n            <!-- /work-nav -->\n        ",
                        directives: [router_1.ROUTER_DIRECTIVES],
                        providers: [work_service_1.WorkService],
                        pipes: [truncate_1.TruncatePipe]
                    }), 
                    __metadata('design:paramtypes', [router_1.Router, router_1.RouteParams, work_service_1.WorkService])
                ], WorkDetails);
                return WorkDetails;
            }());
            exports_1("WorkDetails", WorkDetails);
        }
    }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnQvd29yay93b3JrZGV0YWlscy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7WUFvRkE7Z0JBS0kscUJBQW9CLE9BQWMsRUFBVSxZQUF3QixFQUFVLFlBQXdCO29CQUFsRixZQUFPLEdBQVAsT0FBTyxDQUFPO29CQUFVLGlCQUFZLEdBQVosWUFBWSxDQUFZO29CQUFVLGlCQUFZLEdBQVosWUFBWSxDQUFZO29CQUovRixVQUFLLEdBQUcsSUFBSSxDQUFDO29CQUNiLFNBQUksR0FBRyxFQUFFLENBQUM7Z0JBSWpCLENBQUM7Z0JBRUQsaUNBQVcsR0FBWCxVQUFZLE1BQU07b0JBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxhQUFhLEVBQUUsRUFBQyxFQUFFLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUN4RCxDQUFDO2dCQUdELDZCQUFPLEdBQVA7b0JBQ0ksMkNBQTJDO29CQUMzQyw0Q0FBNEM7b0JBQzVDLG1EQUFtRDtvQkFDbkQsNkNBQTZDO29CQUM3QyxnQ0FBZ0M7b0JBQ2hDLG1DQUFtQztvQkFDbkMsWUFBWTtvQkFDWixRQUFRO29CQUNSLE1BQU07b0JBVFYsaUJBb0JDO29CQVRHLDRCQUE0QjtvQkFDNUIscUNBQXFDO29CQUNyQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFBLElBQUk7d0JBQ2pDLEdBQUcsQ0FBQyxDQUFnQixVQUFJLEVBQUosYUFBSSxFQUFKLGtCQUFJLEVBQUosSUFBSSxDQUFDOzRCQUFwQixJQUFJLE9BQU8sYUFBQTs0QkFDWixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLEtBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dDQUMzQixLQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQzs0QkFDeEIsQ0FBQzt5QkFDSjtvQkFDTCxDQUFDLENBQUMsQ0FBQztnQkFDUCxDQUFDOztnQkFFRCx1REFBdUQ7Z0JBQ3ZELDhCQUFRLEdBQVI7b0JBQ0ksSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDekMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUNuQixDQUFDO2dCQXJITDtvQkFBQyxnQkFBUyxDQUFDO3dCQUNQLFFBQVEsRUFBRSxhQUFhO3dCQUN2QixRQUFRLEVBQUUsOGxJQXNFTDt3QkFDTCxVQUFVLEVBQUUsQ0FBQywwQkFBaUIsQ0FBQzt3QkFDL0IsU0FBUyxFQUFFLENBQUMsMEJBQVcsQ0FBQzt3QkFDeEIsS0FBSyxFQUFFLENBQUMsdUJBQVksQ0FBQztxQkFDeEIsQ0FBQzs7K0JBQUE7Z0JBMENGLGtCQUFDO1lBQUQsQ0F4Q0EsQUF3Q0MsSUFBQTtZQXhDRCxxQ0F3Q0MsQ0FBQSIsImZpbGUiOiJjb250ZW50L3dvcmsvd29ya2RldGFpbHMuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIE9uSW5pdH0gZnJvbSAnYW5ndWxhcjIvY29yZSc7XG5pbXBvcnQge1JvdXRlciwgUm91dGVQYXJhbXMsIFJPVVRFUl9ESVJFQ1RJVkVTfSBmcm9tIFwiYW5ndWxhcjIvcm91dGVyXCI7XG5pbXBvcnQge1dvcmtTZXJ2aWNlfSBmcm9tIFwiLi93b3JrLnNlcnZpY2VcIjtcbmltcG9ydCB7V29ya30gZnJvbSBcIi4vd29ya1wiO1xuaW1wb3J0IHtUcnVuY2F0ZVBpcGV9IGZyb20gXCIuLi8uLi9waXBlcy90cnVuY2F0ZVwiO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogXCJ3b3JrZGV0YWlsc1wiLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyIGJvdHRvbS1zcGFjZVwiPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPCEtLXJvdy0tPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3b3JrLXJvdyByb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm90YXRlIGxlZnQtYnJlYWRjcnVtYiBsYi1zbWFsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDI+e3t3b3JrLmJyZWFkY3J1bWJ9fTwvaDI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwhLS0gLi9jb2wtbWQtMSAtLT5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtOSBjb2wtbGctOCBjb2wtbWQtb2Zmc2V0LTEgY29sLWxnLW9mZnNldC0wIGNsci1zcGFjZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSB3b3JrLW5hdiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3b3JrLW5hdlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2V3XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXAgd29yay1uYXYtYnRuc1wiIHJvbGU9XCJncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4td29ya1wiIChjbGljayk9XCJzaG93RGV0YWlscyh3b3JrSWQgPSB1cmxJZCAtIDEpXCIgKm5nSWY9XCJ1cmxJZCA+IDFcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4td29ya1wiIFtyb3V0ZXJMaW5rXT1cIlsnL1dvcmsnXVwiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10aFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXdvcmtcIiAoY2xpY2spPVwic2hvd0RldGFpbHMod29ya0lkID0gdXJsSWQgKyAxKVwiICpuZ0lmPVwidXJsSWQgPCA2XCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIC93b3JrLW5hdiAtLT5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIHdvcmstaW5mbyAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWJveCBza2V3XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNrZXctanVzdGlmeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid29yay1kZXRhaWxzLWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBbaW5uZXJIVE1MXT1cIndvcmsudGl0bGVcIj48L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIFtpbm5lckhUTUxdPVwid29yay5zdWJ0aXRsZVwiPjwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IFtpbm5lckhUTUxdPVwid29yay5kZXNjXCI+PC9kaXY+XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIC93b3JrLWluZm8gLS0+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8IS0tIC8uY29sIFt3b3JrLWluZm8td3JhcHBlcl0gLS0+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8IS0tIHdvcmstY29udGVudCAtLT5cbiAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtOSBjb2wtbGctMTAgY29sLW1kLW9mZnNldC0zIGNvbC1sZy1vZmZzZXQtMiB3b3JrLWltZyBjbHItc3BhY2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWJveCBza2V3XCI+PGRpdiBjbGFzcz1cInNrZXctanVzdGlmeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbWctZGV0YWlsc1wiICpuZ0Zvcj1cIiNpbWcgb2Ygd29yay5pbWdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIFtpbm5lckhUTUxdPVwiaW1nLmltZ1RpdGxlXCI+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIFtpbm5lckhUTUxdPVwiaW1nLmltZ0Rlc2NcIj48L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaW1nLXJlc3BvbnNpdmVcIiBzcmM9XCJ7e2ltZy5pbWdVcmx9fVwiIGFsdD1cIlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSAvLmNvbCBbd29yay1jb250ZW50XSAtLT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8IS0tL3Jvdy0tPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICA8L2Rpdj48IS0tL2NvbnQtLT5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPCEtLSB3b3JrLW5hdiAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXIgYm90dG9tLXNwYWNlXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyB3b3JrLW5hdlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tld1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cCB3b3JrLW5hdi1idG5zXCIgcm9sZT1cImdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4td29ya1wiIChjbGljayk9XCJzaG93RGV0YWlscyh3b3JrSWQgPSB1cmxJZCAtIDEpXCIgKm5nSWY9XCJ1cmxJZCA+IDFcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXdvcmtcIiBbcm91dGVyTGlua109XCJbJy9Xb3JrJ11cIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGhcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4td29ya1wiIChjbGljayk9XCJzaG93RGV0YWlscyh3b3JrSWQgPSB1cmxJZCArIDEpXCIgKm5nSWY9XCJ1cmxJZCA8IDZcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj4gIFxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8IS0tIC93b3JrLW5hdiAtLT5cbiAgICAgICAgYCxcbiAgICBkaXJlY3RpdmVzOiBbUk9VVEVSX0RJUkVDVElWRVNdLFxuICAgIHByb3ZpZGVyczogW1dvcmtTZXJ2aWNlXSxcbiAgICBwaXBlczogW1RydW5jYXRlUGlwZV1cbn0pXG5cbmV4cG9ydCBjbGFzcyBXb3JrRGV0YWlscyBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgcHVibGljIHVybElkID0gbnVsbDtcbiAgICBwdWJsaWMgd29yayA9IHt9O1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9yb3V0ZXI6Um91dGVyLCBwcml2YXRlIF9yb3V0ZVBhcmFtczpSb3V0ZVBhcmFtcywgcHJpdmF0ZSBfd29ya1NlcnZpY2U6V29ya1NlcnZpY2UpIHtcbiAgICB9XG5cbiAgICBzaG93RGV0YWlscyh3b3JrSWQpIHtcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnV29ya0RldGFpbHMnLCB7aWQ6IHdvcmtJZH1dKVxuICAgIH1cblxuXG4gICAgZ2V0V29yaygpIHtcbiAgICAgICAgLy8gUHJvbWlzZSBoYW5kbGluZyB3aXRoIEVTNSAtIEV4YW1wbGUgb25seVxuICAgICAgICAvLyAndGhpcycta2V5d29yZCB3aWxsIHVzZSBpbm5lciBlbnZpcm9ubWVudFxuICAgICAgICAvLyB0aGlzLl93b3JrU2VydmljZS5nZXRXb3JrKCkudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgLy8gICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vICAgICAgICAgaWYoZGF0YVtpXS5pZCA9PSAxKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMud29yayA9IGRhdGFbaV07XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyBQcm9taXNlIGhhbmRsaW5nIHdpdGggRVM2XG4gICAgICAgIC8vIEdldCB3b3JrIGRldGFpbHMgZnJvbSBwYXNzZWQgdXJsSWRcbiAgICAgICAgdGhpcy5fd29ya1NlcnZpY2UuZ2V0V29yaygpLnRoZW4od29yayA9PiB7XG4gICAgICAgICAgICBmb3IgKHZhciBkZXRhaWxzIG9mIHdvcmspIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlscy5pZCA9PSB0aGlzLnVybElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29yayA9IGRldGFpbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyogSW5pdGlhbGl6ZSBnZXQgcm91dGUgcGFyYW1ldGVycyBmcm9tIHBhc3NlZCB1cmxJZCAqL1xuICAgIG5nT25Jbml0KCk6YW55IHtcbiAgICAgICAgdGhpcy51cmxJZCA9IHRoaXMuX3JvdXRlUGFyYW1zLmdldCgnaWQnKTtcbiAgICAgICAgdGhpcy5nZXRXb3JrKCk7XG4gICAgfVxufVxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
